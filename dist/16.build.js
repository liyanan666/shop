webpackJsonp([16],{105:function(e,t,i){t=e.exports=i(2)(),t.push([e.i,".mint-cell{border-bottom:1px solid #efefef}.perinfobtn{width:90%;height:.8rem;background:#d90a00;margin:1rem auto;border-radius:8px;color:#fff;text-align:center;line-height:.8rem;font-size:18px}.popupheader{height:.8rem;border-bottom:1px solid #f8f8f8}.popupheader span{margin:0 .3rem;font-size:.3rem;color:#26a2ff;line-height:.8rem}.mint-cell:last-child{background-position:inherit;border-bottom:1px solid #efefef}.mint-popup-bottom{width:100%}.myheader{height:2rem;display:flex;align-items:center;padding:0 10px;background:#fff;font-size:16px;border-bottom:1px solid #efefef}.myheader .header_title{width:105px}.a-upload{width:1.3rem;height:1.3rem;line-height:20px;position:relative;cursor:pointer;color:#888;border-radius:4px;overflow:hidden;display:inline-block;*display:inline;*zoom:1}.a-upload img{width:100%;height:100%}.a-upload input{position:absolute;font-size:100px;right:0;top:0;opacity:0;filter:alpha(opacity=0);cursor:pointer}",""])},136:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("mt-header",{attrs:{title:"个人资料"}},[i("router-link",{attrs:{slot:"left",to:"/personal"},slot:"left"},[i("mt-button",{attrs:{icon:"back"}})],1)],1),e._v(" "),i("div",[i("mt-field",{attrs:{label:"用户名:",readonly:"",placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),i("mt-field",{attrs:{label:"昵称:",placeholder:"请输入昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),e._v(" "),i("mt-field",{attrs:{label:"手机号:",placeholder:"请输入手机号",type:"number"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),i("div",{on:{click:function(t){e.sexVisible=!0}}},[i("mt-field",{attrs:{readonly:"",label:"性别:",placeholder:"请输入性别",type:"url"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}})],1),e._v(" "),i("div",{staticClass:"myheader"},[i("span",{staticClass:"header_title"},[e._v("我的头像")]),e._v(" "),i("span",[i("a",{staticClass:"a-upload",attrs:{href:"javascript:;"}},[i("img",{attrs:{src:e.headportrait}}),e._v(" "),i("input",{attrs:{type:"file",name:"",id:"",accept:"image/*"},on:{change:e.uploadfile}})])])]),e._v(" "),i("div",{on:{click:function(t){e.collageVisible=!0}}},[i("mt-field",{attrs:{label:"所在院校:",readonly:"",placeholder:"请输入院校"},model:{value:e.school,callback:function(t){e.school=t},expression:"school"}})],1),e._v(" "),i("mt-field",{attrs:{label:"简介:",placeholder:"请输入简介",type:"textarea",rows:"4"},model:{value:e.introduction,callback:function(t){e.introduction=t},expression:"introduction"}})],1),e._v(" "),i("div",{staticClass:"perinfobtn",on:{click:e.savedata}},[e._v("保存")]),e._v(" "),i("mt-popup",{attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:e.sexVisible,callback:function(t){e.sexVisible=t},expression:"sexVisible"}},[i("div",{staticClass:"popupheader clearfix"},[i("span",{staticClass:"fl",on:{click:function(t){e.sexVisible=!1}}},[e._v("取消")]),i("span",{staticClass:"fr",on:{click:e.savesex}},[e._v("保存")])]),e._v(" "),i("mt-picker",{attrs:{slots:e.sexslots},on:{change:e.onsexChange}})],1),e._v(" "),i("mt-popup",{attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:e.collageVisible,callback:function(t){e.collageVisible=t},expression:"collageVisible"}},[i("div",{staticClass:"popupheader clearfix"},[i("span",{staticClass:"fl",on:{click:function(t){e.collageVisible=!1}}},[e._v("取消")]),i("span",{staticClass:"fr",on:{click:e.savecollage}},[e._v("保存")])]),e._v(" "),i("mt-picker",{attrs:{slots:e.collageslots},on:{change:e.onCollageChange}})],1)],1)},staticRenderFns:[]}},157:function(e,t,i){var o=i(105);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(10)("6a5c56e0",o,!0,{})},32:function(e,t,i){function o(e){i(157)}var s=i(3)(i(69),i(136),o,null,null);e.exports=s.exports},69:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(4);i.n(o);t.default={data:function(){return{sexVisible:!1,collageVisible:!1,username:"",nickname:"",phone:"",sex:"男",headportrait:"../../src/img/upload.png",school:"",introduction:"",userinfo:{},modelnickname:"",pickersex:"",pickercollage:"",modelemailval:"",emailval:"",modelintroduce:"",sexslots:[{values:["男","女"],textAlign:"center"}],collageslots:[{values:["郑州科技学院","黄河科技学院","郑州大学","财经政法大学","上海交通大学"],textAlign:"center"}]}},mounted:function(){this.userinfo=JSON.parse(localStorage.getItem("userinfo"))||"",console.log(this.userinfo),this.userinfo&&(this.username=this.userinfo.username,this.sex=this.userinfo.sex||"男",this.nickname=this.userinfo.nickname,this.phone=this.userinfo.phone,this.school=this.userinfo.school,this.introduction=this.userinfo.introduction,this.headportrait=this.userinfo.headportrait||"../../src/img/upload.png")},methods:{changename:function(){var e=this;o.MessageBox.prompt("",{message:"请输入昵称？",showInput:!0,inputValue:this.modelname}).then(function(t){var s=t.value;t.action;if(s.length>9)return void i.i(o.MessageBox)("提示","超出字符限制，请重新填写");e.modelnickname=s,e.nickname=s}).catch(function(e){})},onsexChange:function(e,t){this.pickersex=t.toString()},onCollageChange:function(e,t){this.pickercollage=t.toString()},uploadfile:function(){var e=this,t=event.target.files[0];if(window.FileReader){var i=new FileReader;i.readAsDataURL(t),i.onloadend=function(i){var o=new FormData;o.append("file",t),console.log(o),$.ajax({url:e.GLOBAL.host+"/uploadimg",type:"POST",data:o,processData:!1,contentType:!1,success:function(t){e.headportrait=t.url},error:function(e){console.log("error")}})}}},savesex:function(){this.sex=this.pickersex,this.sexVisible=!1},savecollage:function(){this.school=this.pickercollage,this.collageVisible=!1},savedata:function(){if(11!=this.phone.length)return void i.i(o.MessageBox)("提示","手机号码不正确");var e=this,t={username:this.username,nickname:this.nickname,phone:this.phone,sex:this.sex,headportrait:this.headportrait,school:this.school,introduction:this.introduction,_id:e.userinfo._id};t=JSON.stringify(t),$.ajax({url:e.GLOBAL.host+"/changeuserinfo",type:"POST",data:{id:e.userinfo._id,userinfo:t},success:function(t){0==t.code?(localStorage.setItem("userinfo",JSON.stringify(t.data)),e.$router.push("./personal")):i.i(o.MessageBox)("提示","保存失败，请稍后重试")},error:function(e){i.i(o.MessageBox)("提示","保存失败，请稍后重试")}})}}}}});
//# sourceMappingURL=16.build.js.map